@Observed
class ClassA {
  public a: number;

  constructor(a: number) {
    this.a = a;
  }
}

@Observed
class ClassB {
  public a: ClassA;
  public b: number;

  constructor(a: ClassA, b: number) {
    this.a = a;
    this.b = b;
  }
}


/*============================================================*/
/*============================================================*/
/*============================================================*/
/*============================================================*/
/*============================================================*/
/*============================================================*/
/*============================================================*/
/*============================================================*/
/*============================================================*/
/*============================================================*/
/*============================================================*/
/*============================================================*/
/*============================================================*/
/*============================================================*/
/*============================================================*/
/*============================================================*/
/*============================================================*/
/*============================================================*/
/*============================================================*/
/*============================================================*/
/*============================================================*/
/*============================================================*/
/*============================================================*/
/*============================================================*/
/*============================================================*/
/*============================================================*/
/*============================================================*/
/*============================================================*/
/*============================================================*/

@Component
export struct DemoA {
  @ObjectLink a: ClassA;

  build() {
    Text(this.a.a.toString())
  }
}

@Component
export struct Demo {
  @ObjectLink b: ClassB;

  build() {
    Column() {
      // 这样写不响应
      // Text(`a: ${this.b.a.a}`)
      // 这样写就可以
      DemoA({ a: this.b.a ! })
      Button("Change ClassB.a.a")
        .onClick(() => {
          this.b.a.a += 1;
        })

      Text(`b: ${this.b.b}`)
      Button("Change ClassB.b")
        .onClick(() => {
          this.b.b += 1;
        })
    }
  }
}

@Component
export struct MyView {
  @State b: ClassB = new ClassB(new ClassA(10), 20);

  build() {
    Demo({ b: this.b })
  }
}

/**
 *
 *
 *
 *
 *
 *
 *
 *
 *
 *
 *
 *
 *
 *
 *
 *
 *
 *
 *
 *
 *
 *
 *
 */

